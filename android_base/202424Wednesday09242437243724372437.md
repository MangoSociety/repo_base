#готово 

Theme : #golang #scheduler
Title: Сколько потоков операционной системы мы можем создать?
Sphere : #backend

### Content

В Go количество создаваемых потоков операционной системы (M) напрямую зависит от значения переменной окружения `GOMAXPROCS`, которая определяет количество логических процессоров (P), доступных для планировщика Go. При этом количество потоков операционной системы может варьироваться в зависимости от нужд планировщика и выполнения горутин.

### `GOMAXPROCS`

- **Описание**: `GOMAXPROCS` устанавливает максимальное количество логических процессоров, которые планировщик Go может использовать одновременно.
- **По умолчанию**: Значение по умолчанию `GOMAXPROCS` равно количеству доступных ядер процессора.
- **Изменение значения**: Вы можете изменить значение `GOMAXPROCS` с помощью функции `runtime.GOMAXPROCS(n)`.
### Ограничения

- **Аппаратные ограничения**: Максимальное количество потоков операционной системы, которые можно создать, ограничено аппаратными ресурсами (такими как количество ядер CPU и доступная оперативная память).
- **Ограничения ОС**: Операционные системы могут иметь свои собственные ограничения на количество создаваемых потоков, определяемые конфигурацией системы и параметрами ядра.

### Практические аспекты

- **Планировщик Go**: Планировщик Go создает и управляет системными потоками (M) по мере необходимости. Обычно количество потоков будет больше, чем `GOMAXPROCS`, особенно если горутины часто блокируются на системных вызовах.
- **Балансировка нагрузки**: Планировщик Go распределяет горутины между доступными системными потоками для обеспечения эффективного использования CPU.
- **Эффективность**: Использование горутин позволяет создавать тысячи и даже миллионы параллельных задач с минимальными накладными расходами по сравнению с системными потоками.
### External Link



### Internal Link

- 