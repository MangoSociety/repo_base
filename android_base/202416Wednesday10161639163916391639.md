#process 

Theme : #index
Title: Расскажи про составной индекс
Sphere : #database

### Content

- **Описание**: Составной индекс индексирует несколько столбцов одной таблицы. Это позволяет значительно ускорить запросы, которые фильтруют данные по нескольким столбцам одновременно.
- **Применение**: Эффективен для запросов, использующих условия фильтрации, сортировки и объединения по нескольким столбцам.

### Примеры создания и использования составного индекса:

#### В MySQL:

**Создание составного индекса:**

```sql
CREATE TABLE employees (
    id INT PRIMARY KEY,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    department VARCHAR(100)
);

-- Создание составного индекса для столбцов first_name и last_name
CREATE INDEX idx_name_dept ON employees (first_name, last_name);
```

**Использование составного индекса:**

```sql
-- Запрос, который использует составной индекс
SELECT * FROM employees
WHERE first_name = 'John' AND last_name = 'Doe';
```

#### В PostgreSQL:

**Создание составного индекса:**

```sql
CREATE TABLE sales (
    id SERIAL PRIMARY KEY,
    product_id INT,
    customer_id INT,
    sale_date DATE
);

-- Создание составного индекса для столбцов product_id и sale_date
CREATE INDEX idx_product_date ON sales (product_id, sale_date);
```

**Использование составного индекса:**

```sql
-- Запрос, который использует составной индекс
SELECT * FROM sales
WHERE product_id = 123 AND sale_date = '2023-06-01';
```

### Преимущества:
- **Ускорение запросов**: Значительно улучшает производительность запросов, которые фильтруют, сортируют или соединяют данные по нескольким столбцам.
- **Уменьшение количества индексов**: Позволяет избежать создания множества отдельных индексов на каждый столбец.

### Недостатки:
- **Порядок столбцов**: Важно правильно выбрать порядок столбцов в составе индекса, так как порядок влияет на эффективность индекса. Индекс используется эффективно только если запросы фильтруются по первым столбцам индекса.
- **Накладные расходы на обновление**: Вставка, обновление и удаление данных могут быть более затратными по времени из-за необходимости обновления индекса.

### Пример полного запроса с составным индексом:

```sql
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INT,
    order_date DATE,
    total_amount DECIMAL(10, 2)
);

-- Создание составного индекса для столбцов customer_id и order_date
CREATE INDEX idx_customer_order ON orders (customer_id, order_date);

-- Запрос, который использует составной индекс
SELECT * FROM orders
WHERE customer_id = 456 AND order_date BETWEEN '2023-01-01' AND '2023-12-31';
```

Составные индексы являются мощным инструментом для оптимизации производительности запросов, которые часто фильтруют и сортируют данные по нескольким столбцам одновременно. Они позволяют существенно уменьшить время выполнения сложных запросов и улучшить общую производительность базы данных.
### External Link



### Internal Link

- 