#process 

Theme : #index
Title: Расскажи про фильтрованный индекс
Sphere : #database

### Content

 **Filtered Index (Фильтрованный индекс)**

- **Описание**: Фильтрованный индекс создается с условием, которое ограничивает количество индексируемых строк. Это позволяет индексировать только те строки, которые удовлетворяют определенному критерию.
- **Применение**: Эффективен для улучшения производительности запросов, которые часто фильтруют данные по определенному условию.

### Примеры создания и использования фильтрованного индекса:

#### В SQL Server:

**Создание фильтрованного индекса:**

```sql
CREATE TABLE sales (
    id INT PRIMARY KEY,
    amount DECIMAL(10, 2),
    status VARCHAR(20)
);

-- Создание фильтрованного индекса для индексации только успешных продаж
CREATE INDEX idx_sales_successful ON sales(amount)
WHERE status = 'successful';
```

**Использование фильтрованного индекса:**

```sql
-- Запросы, использующие условие фильтрованного индекса, будут работать быстрее
SELECT * FROM sales
WHERE status = 'successful' AND amount > 100;
```

#### В PostgreSQL:

**Создание фильтрованного индекса:**

```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    amount DECIMAL(10, 2),
    is_paid BOOLEAN
);

-- Создание фильтрованного индекса для индексации только оплаченных заказов
CREATE INDEX idx_orders_paid ON orders(amount)
WHERE is_paid = TRUE;
```

**Использование фильтрованного индекса:**

```sql
-- Запросы, использующие условие фильтрованного индекса, будут работать быстрее
SELECT * FROM orders
WHERE is_paid = TRUE AND amount > 50;
```

### Преимущества:
- **Повышение производительности**: Улучшает производительность запросов, которые фильтруют данные по условиям, совпадающим с условием индекса.
- **Экономия пространства**: Занимает меньше места по сравнению с полным индексом, так как индексируются только строки, удовлетворяющие условию.
- **Быстрое обновление**: Обновление индекса быстрее, так как меньшее количество строк включено в индекс.

### Недостатки:
- **Сложность управления**: Требуется тщательное управление и понимание условий, чтобы максимизировать пользу от фильтрованных индексов.
- **Ограниченная поддержка**: Не все системы управления базами данных поддерживают фильтрованные индексы.

### Пример полного запроса с фильтрованным индексом:

```sql
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    price DECIMAL(10, 2),
    discontinued BOOLEAN
);

-- Создание фильтрованного индекса для индексации только активных продуктов
CREATE INDEX idx_products_active ON products(price)
WHERE discontinued = FALSE;

-- Запрос, который использует фильтрованный индекс
SELECT * FROM products
WHERE discontinued = FALSE AND price < 100;
```
### External Link



### Internal Link

- 